kind: AdaptiveDialog
beginDialog:
  kind: OnRedirect
  id: main
  actions:
    - kind: Question
      id: question_5vxfIx
      interruptionPolicy:
        allowInterruption: true

      variable: init:Global.userResponse
      prompt: |-
        Could you please list what you have already packed for your {Global.arrivalCity} trip? 

        **Just a simple list** (e.g., coat, shirts, shoes, charger) is perfect. This will help me spot any essentials you might be missing based on the weather and your travel purpose.

        If you didn't pack yet you can write **Nothing**. 
      entity: StringPrebuiltEntity

    - kind: SearchAndSummarizeContent
      id: 0c2pJo
      userInput: "=Concatenate(\"added items to luggage for now: \",Global.userResponse, \"weather information: \",Global.weatherResult, \"between \", Global.startDate, \"and\", Global.endDate , \"arrival city: \", Global.arrivalCity, \"tarvel purpose: \", Global.travelPurpose)"
      additionalInstructions: |-
        This input may contain multiple sections concatenated together (e.g., added items, weather information, dates, arrival city, travel purpose).
        Your output must ALWAYS be clean text.
        Do NOT output JSON, arrays, schemas, code blocks, or Adaptive Cards.
        You ALWAYS generate a detailed **packing checklist**.
        ================================================
        GENERAL OUTPUT RULES
        - Output must always be **plain text only**.
        - Use ‚úì, ‚úÖ, ‚ö†Ô∏è emojis.
        - The style must be friendly, helpful, and mobile‚Äëfriendly.
        - You MAY use any item name. There is **no allowed item list restriction**.
        - You may freely generate new packing items as long as they are safe, realistic, and non-harmful.
        - Weather information and travel purpose should influence recommendations.

        ================================================
        üß© DETECTED ITEMS
        Scan the entire concatenated userInput and list any items the user already mentioned.
        Format each detected item as:
        ‚úì
        If nothing is detected ‚Üí write:
        (none detected)
        ================================================
        üß† SUGGESTED ITEMS
        Suggest **8‚Äì15 additional items** that would make sense for the user‚Äôs trip.
        Your suggestions should adapt intelligently to:
        ### WEATHER
        Use keywords like sunny, rainy, snow, cold, hot, temperature values:
        - rainy ‚Üí umbrella, waterproof jacket, cover bag
        - cold / snowy ‚Üí warm clothing, thick socks, layers
        - sunny / UV high ‚Üí sunscreen, sunglasses, water bottle
        - hot (‚â• 25¬∞C) ‚Üí breathable clothing, hydration items
        - cool (6‚Äì12¬∞C) ‚Üí light jacket, scarf
        - unclear weather ‚Üí neutral everyday travel items

        ### TRAVEL PURPOSE
        - beach ‚Üí swimsuit, beach towel, sunscreen, flip-flops
        - business ‚Üí laptop, charger, dress shirt, ID documents
        - hiking ‚Üí snacks, first‚Äëaid kit, sturdy shoes
        - city trip ‚Üí comfortable shoes, light jacket
        - romantic getaway ‚Üí nice outfit, travel-size toiletries

        Format each suggestion as:
        ‚úÖ
        ================================================
        üó∫Ô∏è RECOMMENDATIONS & TRAVEL TIPS
        Give **3‚Äì5 short advisory notes**, using ‚ö†Ô∏è emoji.
        You may reference:
        - weather conditions
        - arrival city
        - dates
        - travel purpose

        Example style:
        ‚ö†Ô∏è Check the weather forecast again on your departure day.
        ‚ö†Ô∏è Keep essential documents in an easy-access pocket.
        ‚ö†Ô∏è For sunny trips, recharge your power bank before travel.
        ================================================
        FINAL RULE
        Your entire output must ALWAYS be plain text, readable, mobile‚Äëfriendly, and formatted ONLY with ‚úì, ‚úÖ, ‚ö†Ô∏è emojis.
        No JSON. No arrays. No code blocks. No Adaptive Cards.
      webBrowsing: true

    - kind: Question
      id: question_d4B8Vv
      interruptionPolicy:
        allowInterruption: true

      variable: init:Topic.checlikstChoice
      prompt: Would you like to contunie?(Local Information & luggage waning section.)
      entity:
        kind: EmbeddedEntity
        definition:
          kind: ClosedListEntity
          items:
            - id: Yes
              displayName: Yes

    - kind: ConditionGroup
      id: conditionGroup_jHgLva
      conditions:
        - id: conditionItem_tz4wkp
          condition: =Topic.checlikstChoice = 'copilots_header_0ad02.topic.Checklist.main.question_d4B8Vv'.Yes
          actions:
            - kind: BeginDialog
              id: ZIOLVc
              dialog: copilots_header_0ad02.topic.LocalLuggage

            - kind: EndDialog
              id: zhM5AS

inputType: {}
outputType: {}